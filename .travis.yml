dist: trusty
group: edge
sudo: required
language: python
python:
- '2.7'
- '3.4'
- '3.5'
- '3.6'
env:
- JENKINS_VERSION=stable
- JENKINS_VERSION=latest
before_install:
- jdk_switcher use oraclejdk8
install:
- pip install tox-travis
- python setup.py -q sdist bdist_wheel
script:
- tox
jobs:
  include:
  - stage: test
    script: tox
  - stage: release
    script: skip
    deploy:
      on:
        repo: pycontribs/jenkinsapi
        tags: true
      provider: pypi
      user: lechat
      password:
        secure: bf7DVF+KH0nJv2pnNi88yxLQAVjpOmgKipDwV/T3Itpkb3kQPGkdQrt7t0uWCmI/04/GnXsEHyHukOXFmOkVVbp5RCVvCnmvyZs2kaj3dlKGb7+I9BI78AAwWEJKPqFIKnxHxEEDZQ6Y0aZZgovkZrJdCFSCwcCum++84RYf6/I=
      distributions: sdist bdist_wheel
      skip_cleanup: true
